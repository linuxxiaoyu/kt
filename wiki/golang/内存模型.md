# 内存模型

由于CPU的速度明显高于内存，为了提高加载速度，在CPU与内存之间会有L1、L2、L3级缓存。这些缓存中L1级缓存离CPU最近，速度最快，但容量也最小。

编译器在做编译优化时，会利用到指令重排等手段，它只能保证在本goroutine内的结果是正确的。如果存在多goroutine共享数据的情况，可能会发生未知错误。

为了保证多个goroutine程序的正确执行，往往需要使用sync包、sync.atomic包、chan等同步元语。

## Happens Before

假如有两个goroutine分别为A和B，如果A比B先发生，可以说是A先行发生于B。如果A不先行发生于B，B也不先行发生于A，则A与B是并发的。

如果在并发时需要读写共享数据，行为将是未知的。

